---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const all = await getCollection('alternatives');
all.sort((a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime());

const byNiche = all.reduce((acc: Record<string, typeof all>, e) => {
  if (!acc[e.data.niche]) acc[e.data.niche] = [];
  acc[e.data.niche].push(e);
  return acc;
}, {});
---

<BaseLayout
  title="Software Alternatives Guides 2026 â€” PickStack.ai"
  description="Thinking of switching? We cover the best alternatives to the most popular property management, HOA, and salon software â€” with honest comparisons and affiliate-disclosed recommendations."
>
  <section style="background:white; padding:56px 0 48px; border-bottom:1px solid #E5E7EB;">
    <div class="container-layout">
      <nav style="margin-bottom:20px; font-size:13px;">
        <ol style="display:flex; align-items:center; gap:8px; color:#6B7280; list-style:none; padding:0; margin:0;">
          <li><a href="/" style="color:var(--color-link); text-decoration:none;">Home</a></li>
          <li style="color:#D1D5DB">/</li>
          <li style="color:#111827; font-weight:500;">Alternatives</li>
        </ol>
      </nav>
      <div class="hero-eyebrow" style="text-align:left; display:inline-block;">ðŸ”„ Alternatives Guides</div>
      <h1 style="font-size:2.5rem; font-weight:800; color:var(--color-primary); margin:16px 0 16px; letter-spacing:-0.02em; line-height:1.15;">
        Looking to Switch?
      </h1>
      <p style="font-size:1.1rem; color:#4B5563; max-width:640px; line-height:1.65; margin-bottom:0;">
        Unbiased guides to the best alternatives for every major tool. Whether you're outgrowing your current software or just looking for a better deal, we've done the research.
      </p>
    </div>
  </section>

  <section style="padding:48px 0 72px; background:#F9FAFB;">
    <div class="container-layout">
      {Object.entries(byNiche).length === 0 ? (
        <p style="color:#6B7280; text-align:center; padding:48px 0;">Alternatives guides coming soon.</p>
      ) : (
        Object.entries(byNiche).map(([niche, entries]) => {
          const nicheLabel = niche.replace(/-/g, ' ').replace(/\b\w/g, (c: string) => c.toUpperCase());
          return (
            <div style="margin-bottom:48px;">
              <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:20px;">
                <h2 style="font-size:1.35rem; font-weight:700; color:var(--color-primary);">{nicheLabel}</h2>
                <a href={`/${niche}`} style="font-size:13px; color:var(--color-link); font-weight:600;">Browse {nicheLabel} â†’</a>
              </div>
              <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:16px;">
                {entries.map((e: (typeof all)[0]) => (
                  <a href={`/alternatives/${e.slug}`} style="display:block; background:white; border:1px solid #E5E7EB; border-radius:10px; padding:20px 22px; text-decoration:none;">
                    <div style="font-size:11px; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:#7C3AED; margin-bottom:8px;">ðŸ”„ Alternatives</div>
                    <div style="font-size:15px; font-weight:700; color:var(--color-primary); margin-bottom:6px; line-height:1.35;">{e.data.title}</div>
                    <p style="font-size:13px; color:#6B7280; margin:0 0 10px; line-height:1.5;">{e.data.excerpt}</p>
                    <div style="font-size:12px; color:#9CA3AF;">
                      {e.data.alternatives.length} alternatives covered
                    </div>
                  </a>
                ))}
              </div>
            </div>
          );
        })
      )}
    </div>
  </section>
</BaseLayout>
